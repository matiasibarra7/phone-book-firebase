(this["webpackJsonpfirebase-storage-test"]=this["webpackJsonpfirebase-storage-test"]||[]).push([[0],{48:function(e,t,n){"use strict";n.r(t);var c=n(3),a=n.n(c),s=n(31),r=n.n(s),l=n(9),i=n(16),o=n(8),b=n(15),j=n.n(b),u=n(33),d=n(19),m=n(22);n(41),n(42);m.a.initializeApp({apiKey:"AIzaSyBTbPzUKMEJwgrXVWvFQyDFhThMbgX5cbs",authDomain:"udemy-auth-learning.firebaseapp.com",projectId:"udemy-auth-learning",storageBucket:"udemy-auth-learning.appspot.com",messagingSenderId:"409133570692",appId:"1:409133570692:web:9958d4098531ba38ac80d1",measurementId:"G-3WJTJZHHP4"});var h=m.a.firestore(),p=m.a.auth(),O=n(2);var x=function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(""),i=Object(l.a)(r,2),o=i[0],b=i[1],m=Object(c.useState)([]),p=Object(l.a)(m,2),x=p[0],v=p[1],f=Object(c.useState)(null),g=Object(l.a)(f,2),N=g[0],k=g[1],y=Object(c.useState)(!1),w=Object(l.a)(y,2),S=w[0],F=w[1],I=Object(c.useState)(null),U=Object(l.a)(I,2),T=U[0],C=U[1],P=Object(c.useState)(!1),E=Object(l.a)(P,2),B=E[0],D=E[1],M=Object(c.useState)(!1),A=Object(l.a)(M,2),L=A[0],W=A[1];Object(c.useEffect)((function(){J(),console.log("contactos: ",x)}),[]);var J=function(){var t=Object(d.a)(j.a.mark((function t(){var n,c,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return W(!0),t.prev=1,console.log("currentUser ",e.currentUser),t.next=5,h.collection("phoneBook-".concat(e.currentUser)).get();case 5:n=t.sent,c=n.docs,a=c.map((function(e){return Object(u.a)({id:e.id},e.data())})),v(a),W(!1),console.log("desde el async"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(){return t.apply(this,arguments)}}(),H=function(){var t=Object(d.a)(j.a.mark((function t(n){var c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a.trim()){t.next=5;break}k("Name can't be blanck"),t.next=26;break;case 5:if(o){t.next=9;break}k("Phone can't be blanck"),t.next=26;break;case 9:return k(null),D(!0),c={name:a,phone:o},t.prev=12,t.next=15,h.collection("phoneBook-".concat(e.currentUser)).add(c);case 15:s(""),b(""),F(!0),J(),D(!1),setTimeout((function(){F(!1)}),3e3),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(12),console.log(t.t0);case 26:case"end":return t.stop()}}),t,null,[[12,23]])})));return function(e){return t.apply(this,arguments)}}(),z=function(){var t=Object(d.a)(j.a.mark((function t(n){var c,a,r,l;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.collection("phoneBook-".concat(e.currentUser)).doc(n).get();case 3:c=t.sent,a=c.data(),r=a.name,l=a.phone,b(l),s(r),C(n),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),G=function(){var t=Object(d.a)(j.a.mark((function t(n){var c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),D(!0),c={name:a,phone:o},t.prev=3,t.next=6,h.collection("phoneBook-".concat(e.currentUser)).doc(T).set(c);case 6:C(null),b(""),s(""),J(),D(!1),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}(),K=function(){var t=Object(d.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.collection("phoneBook-".concat(e.currentUser)).doc(n).delete();case 3:J(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"container mt-5",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsxs)("div",{className:"col",children:[Object(O.jsx)("h2",{children:"New contact"}),Object(O.jsxs)("form",{className:"form-group",onSubmit:T?G:H,children:[Object(O.jsx)("input",{type:"text",value:a,onChange:function(e){return s(e.target.value)},className:"form-control",placeholder:"Type a name"}),Object(O.jsx)("input",{type:"number",value:o,onChange:function(e){return b(e.target.value)},className:"form-control",placeholder:"Type a number phone"}),Object(O.jsx)("div",{className:"d-grid gap-2",children:T?Object(O.jsx)(O.Fragment,{children:B?Object(O.jsx)("div",{className:"btn btn-dark btn-block mt-3",children:Object(O.jsx)("div",{className:"spinner-border text-light",role:"status",children:Object(O.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):Object(O.jsx)("input",{type:"submit",value:"Update contact",className:"btn btn-primary btn-block mt-3"})}):Object(O.jsx)(O.Fragment,{children:B?Object(O.jsx)("div",{className:"btn btn-dark btn-block mt-3",children:Object(O.jsx)("div",{className:"spinner-border text-light",role:"status",children:Object(O.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):Object(O.jsx)("input",{type:"submit",value:"Add contact",className:"btn btn-dark btn-block mt-3"})})})]}),N?Object(O.jsx)("div",{className:"text-danger mt-2",children:N}):Object(O.jsx)(O.Fragment,{}),S?Object(O.jsx)("div",{className:"text-success mt-2",children:"Person correctly added!"}):Object(O.jsx)(O.Fragment,{})]}),Object(O.jsxs)("div",{className:"col",children:[Object(O.jsx)("h2",{children:"Contact list"}),Object(O.jsx)("ul",{className:"list-group",children:L?Object(O.jsx)("li",{className:"list-group-item text-center",children:Object(O.jsx)("div",{className:"spinner-border text-primary",role:"status",children:Object(O.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):Object(O.jsx)(O.Fragment,{children:x.length?x.map((function(e,t){return Object(O.jsx)("li",{className:"list-group-item",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col",children:e.name}),Object(O.jsx)("div",{className:"col",children:e.phone}),Object(O.jsxs)("div",{className:"col btn-group float-end",children:[Object(O.jsx)("button",{className:"btn btn-secondary",onClick:function(){return z(e.id)},children:"Update"}),Object(O.jsx)("button",{className:"btn btn-danger",onClick:function(){return K(e.id)},children:"Delete"})]})]})},e.id+t)})):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{children:"It seems that there are no people here..."}),Object(O.jsx)("div",{children:"Try adding a new contact!"})]})})})]})]})})};var v=function(e){return Object(c.useEffect)((function(){e.msg&&setTimeout((function(){e.showMessage(null)}),3e3)})),Object(O.jsxs)(O.Fragment,{children:[e.msg?Object(O.jsx)("div",{className:"alert alert-success",role:"alert",children:e.msg}):Object(O.jsx)(O.Fragment,{}),Object(O.jsx)("h1",{className:"text-center mt-2",children:"Home"})]})};var f=function(e){var t=Object(o.f)();return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("nav",{className:"navbar navbar-dark bg-dark navbar-expand-lg",children:Object(O.jsxs)("div",{className:"container-fluid",children:[Object(O.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)(i.b,{className:"nav-link",to:"/",children:"Home"})}),e.currentUser?Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)(i.b,{className:"nav-link",to:"/phone-book",children:"Phone-book"})})}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)(i.b,{className:"nav-link",to:"/register",children:"Register"})}),Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)(i.b,{className:"nav-link",to:"/login",children:"Login"})})]})]}),e.currentUser?Object(O.jsx)("button",{className:"btn btn-danger",onClick:function(){p.signOut().then((function(e){t.push("/")})).catch((function(e){console.log(e)}))},children:"Logout"}):Object(O.jsx)(O.Fragment,{})]})})})};var g=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),r=Object(l.a)(s,2),b=r[0],j=r[1],u=Object(c.useState)(null),d=Object(l.a)(u,2),m=d[0],h=d[1],x=Object(o.f)();return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("form",{className:"container-fluid border mt-5",style:{maxWidth:"360px"},onSubmit:function(e){e.preventDefault(),p.signInWithEmailAndPassword(n,b).then((function(e){h(null),x.push("/")})).catch((function(e){h(e.message)}))},children:[Object(O.jsxs)("div",{className:"mb-3",children:[Object(O.jsx)("label",{htmlFor:"emailInput",className:"form-label",children:"Email"}),Object(O.jsx)("input",{type:"text",className:"form-control",id:"emailInput",placeholder:"Type a email for username",onChange:function(e){return a(e.target.value)}})]}),Object(O.jsxs)("div",{className:"mb-3",children:[Object(O.jsx)("label",{htmlFor:"passInput",className:"form-label",children:"Password"}),Object(O.jsx)("input",{type:"password",className:"form-control",id:"passInput",placeholder:"Type a password",onChange:function(e){return j(e.target.value)}})]}),Object(O.jsx)("div",{className:"mb-3",children:Object(O.jsx)("input",{type:"submit",className:"btn btn-dark btn-block mt-4 w-100",value:"Log In"})}),m?Object(O.jsx)("div",{className:"text-danger mb-2",children:m}):Object(O.jsx)(O.Fragment,{}),Object(O.jsxs)("div",{className:"mb-2",children:["Don't have an account? ",Object(O.jsx)(i.b,{to:"/register",children:"Sign up"})," "]})]})})};var N=function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(""),i=Object(l.a)(r,2),b=i[0],j=i[1],u=Object(c.useState)(null),d=Object(l.a)(u,2),m=d[0],h=d[1],x=Object(o.f)();return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("form",{className:"container-fluid border mt-5",style:{maxWidth:"360px"},onSubmit:function(t){t.preventDefault(),p.createUserWithEmailAndPassword(a,b).then((function(t){e.showMessage("Great! Now you can use your own Phone book!"),h(null),x.push("/")})).catch((function(e){h(e.message)}))},children:[Object(O.jsxs)("div",{className:"mb-3",children:[Object(O.jsx)("label",{htmlFor:"emailInput",className:"form-label",children:"Email"}),Object(O.jsx)("input",{type:"email",className:"form-control",id:"emailInput",placeholder:"Type a email for username",onChange:function(e){return s(e.target.value)}})]}),Object(O.jsxs)("div",{className:"mb-3",children:[Object(O.jsx)("label",{htmlFor:"passInput",className:"form-label",children:"Password"}),Object(O.jsx)("input",{type:"password",className:"form-control",id:"passInput",placeholder:"Type a password",onChange:function(e){return j(e.target.value)}})]}),Object(O.jsx)("div",{className:"mb-3",children:Object(O.jsx)("input",{type:"submit",className:"btn btn-dark btn-block mt-4 w-100",value:"Sign up"})}),m?Object(O.jsx)("div",{className:"text-danger mb-2",children:m}):Object(O.jsx)(O.Fragment,{})]})})};var k=function(){var e=Object(c.useState)(null),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(null),r=Object(l.a)(s,2),b=r[0],j=r[1];Object(c.useEffect)((function(){p.onAuthStateChanged((function(e){a(e?e.uid:null)}))}));var u=function(e){j(e)};return Object(O.jsxs)(i.a,{basename:"/",children:[Object(O.jsx)(f,{currentUser:n}),Object(O.jsxs)(o.c,{children:[Object(O.jsx)(o.a,{exact:!0,path:"/",children:Object(O.jsx)(v,{msg:b,showMessage:u})}),Object(O.jsx)(o.a,{path:"/login",children:Object(O.jsx)(g,{})}),Object(O.jsx)(o.a,{path:"/register",children:Object(O.jsx)(N,{showMessage:u})}),Object(O.jsx)(o.a,{path:"/phone-book",children:Object(O.jsx)(x,{currentUser:n})})]})]})};r.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(k,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.54026ff6.chunk.js.map